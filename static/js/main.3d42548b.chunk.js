(this["webpackJsonplivekit-react-example"]=this["webpackJsonplivekit-react-example"]||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);n(78);var a=n(0),i=n.n(a),c=n(49),r=n.n(c),o=(n(83),n(37)),l=n(4),u=n(17),s=n(38),d=n(1),m=n(10),v=n(29),f=n(69),p=n(11),h=n(72),b=n.n(h),E=n(71),k=n(70),g=function(e){var t=e.track,n=e.isLocal,i=Object(a.useRef)();return Object(a.useEffect)((function(){if(!n)return i.current=t.attach(),t.sid&&i.current.setAttribute("data-audio-track-id",t.sid),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t,n]),null},S={video:"_2WNzJ",participant:"_34YL4",placeholder:"_30KSQ",participantBar:"_2LCHl",screenShare:"_1FIqv",iconRed:"_3LzZj",controlsWrapper:"_2kKks",buttonWrapper:"_3w3nM",button:"_hRq5k",icon:"_1Nxni",dangerButton:"_Rt0RH",dropdown:"_3Lz0y",hasDropdown:"_3Bgvz",separator:"_1VLMM",popoverMenu:"_3XXS4",list:"_dKNN7",container:"_14898",overlay:"_17KXW",unmuteButton:"_3QhLc"},j=function(e){var t=e.label,n=e.disabled,c=e.onClick,r=e.icon,o=e.className,l=e.menuItems,u=e.onMenuItemClick,s=Object(a.useState)(!1),d=s[0],p=s[1],h=S.button;o&&(h+=" "+o);var b,E=i.a.createElement("div",null);return l&&l.length>0&&(h+=" "+S.hasDropdown,b=i.a.createElement("button",{disabled:n,className:S.button+" "+S.dropdown,onClick:function(){return p(!d)}},i.a.createElement("div",{className:S.separator}),i.a.createElement(v.a,{height:32,icon:m.a})),E=i.a.createElement("div",{className:S.popoverMenu},i.a.createElement("ul",{className:S.list},null===l||void 0===l?void 0:l.map((function(e,t){return i.a.createElement("li",{key:t,onClick:function(){return function(e){u&&u(e),p(!1)}(e)}},e.label)}))))),i.a.createElement(f.Popover,{isOpen:d,positions:["top"],content:E},i.a.createElement("div",{className:S.buttonWrapper},i.a.createElement("button",{disabled:n,className:h,onClick:c},r&&i.a.createElement(v.a,{className:S.icon,height:32,icon:r}),t),b))},O=function(e){var t=e.isMuted,n=e.onClick,c=e.onSourceSelected,r=Object(a.useState)([]),o=r[0],l=r[1],u=Object(a.useState)([]),s=u[0],d=u[1];Object(a.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){var t=e.filter((function(e){return"audioinput"===e.kind&&e.deviceId}));l(t),d(t.map((function(e){return{label:e.label}})))}))}),[t]);return i.a.createElement(j,{label:t?"Unmute":"Mute",icon:t?m.d:m.c,onClick:n,menuItems:s,onMenuItemClick:function(e){var t=o.find((function(t){return t.label===e.label}));t&&c&&c(t)}})};"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function y(e,t){try{var n=e()}catch(a){return t(a)}return n&&n.then?n.then(void 0,t):n}function T(e){var t,n=Object(a.useState)(!1),i=n[0],c=n[1],r=Object(a.useState)(!1),o=r[0],l=r[1],u=Object(a.useState)(!1),s=u[0],m=u[1],v=Object(a.useState)(),f=v[0],p=v[1],h=Object(a.useState)([]),b=h[0],E=h[1],k=Object(a.useState)([]),g=k[0],S=k[1],j=function(){E(Array.from(e.tracks.values())),S(Array.from(e.tracks.values()).filter((function(e){return void 0!==e.track})))};return Object(a.useEffect)((function(){var t=function(e){e.kind===d.Track.Kind.Audio?c(!0):e.kind===d.Track.Kind.Video&&l(!0)},n=function(e){e.kind===d.Track.Kind.Audio?c(!1):e.kind===d.Track.Kind.Video&&l(!1)},a=function(){e.metadata&&p(e.metadata)},i=function(){m(e.isSpeaking)};return e.on(d.ParticipantEvent.TrackMuted,t),e.on(d.ParticipantEvent.TrackUnmuted,n),e.on(d.ParticipantEvent.MetadataChanged,a),e.on(d.ParticipantEvent.IsSpeakingChanged,i),e.on(d.ParticipantEvent.TrackPublished,j),e.on(d.ParticipantEvent.TrackUnpublished,j),e.on(d.ParticipantEvent.TrackSubscribed,j),e.on(d.ParticipantEvent.TrackUnsubscribed,j),e.on("localtrackchanged",j),a(),i(),j(),function(){e.off(d.ParticipantEvent.TrackMuted,t),e.off(d.ParticipantEvent.TrackUnmuted,n),e.off(d.ParticipantEvent.MetadataChanged,a),e.off(d.ParticipantEvent.IsSpeakingChanged,i),e.off(d.ParticipantEvent.TrackPublished,j),e.off(d.ParticipantEvent.TrackUnpublished,j),e.off(d.ParticipantEvent.TrackSubscribed,j),e.off(d.ParticipantEvent.TrackUnsubscribed,j),e.off("localtrackchanged",j)}}),[e]),e.audioTracks.forEach((function(e){t=e.isMuted})),void 0===t&&(t=!0),i!==t&&c(t),{isLocal:e instanceof d.LocalParticipant,isSpeaking:s,isMuted:i,isAudioMuted:i,isVideoMuted:o,publications:b,subscribedTracks:g,metadata:f,unpublishTrack:function(t){try{if(!(e instanceof d.LocalParticipant))throw new Error("could not unpublish, not a local participant");return e.unpublishTrack(t),e.emit("localtrackchanged"),Promise.resolve()}catch(n){return Promise.reject(n)}}}}var P=function(e){var t,n,a,c=e.room,r=e.enableScreenShare,o=e.enableAudio,l=e.enableVideo,u=e.onLeave,s=T(c.localParticipant),v=s.publications,f=s.isAudioMuted,p=s.isVideoMuted,h=s.unpublishTrack,b=v.find((function(e){return e.kind===d.Track.Kind.Audio})),E=v.find((function(e){return e.kind===d.Track.Kind.Video&&"screen"!==e.trackName})),k=v.find((function(e){return e.kind===d.Track.Kind.Video&&"screen"===e.trackName}));return void 0===r&&(r=!0),void 0===l&&(l=!0),void 0===o&&(o=!0),o&&(t=!b||f?i.a.createElement(j,{label:"Unmute",icon:m.d,onClick:function(){try{var e=function(){if(!b)return Promise.resolve(Object(d.createLocalAudioTrack)()).then((function(e){c.localParticipant.publishTrack(e)}));b.unmute()}();return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(t){return Promise.reject(t)}}}):i.a.createElement(j,{label:"Mute",icon:m.c,onClick:function(){return b.mute()}})),l&&(n=null!==E&&void 0!==E&&E.track&&!p?i.a.createElement(j,{label:"Stop video",icon:m.f,onClick:function(){return E.mute()}}):i.a.createElement(j,{label:"Start video",icon:m.g,onClick:function(){try{var e=function(){if(!E)return Promise.resolve(Object(d.createLocalVideoTrack)()).then((function(e){c.localParticipant.publishTrack(e)}));E.unmute()}();return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(t){return Promise.reject(t)}}})),r&&(a=null!==k&&void 0!==k&&k.track?i.a.createElement(j,{label:"Stop sharing",icon:m.e,onClick:function(){return h(k.track)}}):i.a.createElement(j,{label:"Share screen",icon:m.b,onClick:function(){try{var e=y((function(){return Promise.resolve(navigator.mediaDevices.getDisplayMedia({video:{width:d.VideoPresets.fhd.resolution.width,height:d.VideoPresets.fhd.resolution.height}})).then((function(e){c.localParticipant.publishTrack(e.getTracks()[0],{name:"screen",videoEncoding:{maxBitrate:3e6,maxFramerate:30}})}))}),(function(){}));return Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(t){return Promise.reject(t)}}})),i.a.createElement("div",{className:S.controlsWrapper},t,n,a,u&&i.a.createElement(j,{label:"End",className:S.dangerButton,onClick:function(){c.disconnect(),u(c)}}))},N=function(e){var t,n=e.track,c=e.isLocal,r=e.objectFit,o=e.className,l=e.width,u=e.height,s=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=s.current;if(e)return e.muted=!0,n.attach(e),function(){n.detach(e)}}),[n,s]);var d="environment"!==(null===(t=n.mediaStreamTrack)||void 0===t?void 0:t.getSettings().facingMode),m={transform:c&&d?"rotateY(180deg)":"",width:l,height:u};return r&&(m.objectFit=r),i.a.createElement("video",{ref:s,className:null!=o?o:S.video,style:m})},L=function(e){var t=e.participant,n=e.width,c=e.height,r=e.className,o=e.aspectWidth,l=e.aspectHeight,u=e.orientation,s=e.displayName,f=e.showOverlay,h=e.quality,k=e.adaptiveVideo,g=e.onMouseEnter,j=e.onMouseLeave,O=e.onClick,y=T(t),P=y.isLocal,L=y.isAudioMuted,C=y.subscribedTracks,M=Object(E.a)(),w=M.ref,R=M.inView,V=Object(a.useState)(),I=V[0],_=V[1],A=Object(a.useState)(!0),D=A[0],K=A[1],x=Object(a.useState)(),U=x[0],W=x[1];Object(a.useEffect)((function(){var e=R;k||(e=!0),D!==e&&K(e)}),[t,R,k]),Object(a.useEffect)((function(){var e;C.forEach((function(t){t.isSubscribed&&t.kind===d.Track.Kind.Video&&"screen"!==t.trackName&&!e&&(e=t)})),_(e)}),[C]),Object(a.useEffect)((function(){if(U&&(clearTimeout(U),W(void 0)),I instanceof d.RemoteTrackPublication)return D&&I.setEnabled(!0),W(setTimeout((function(){I.setEnabled(D),D&&I.setVideoQuality(null!=h?h:p.VideoQuality.HIGH)}),3e3)),function(){U&&(clearTimeout(U),W(void 0))}}),[h,D,I]);var Q,B,H={width:n,height:c},z="contain";!u&&o&&l&&(u=o>l?"landscape":"portrait"),null!==I&&void 0!==I&&I.dimensions&&(Q=I.dimensions.width>I.dimensions.height?"landscape":"portrait"),Q===u&&(z="cover"),s||(s=t.identity,P&&(s+=" (You)")),B=null===I||void 0===I||!I.track||!D||null!==I&&void 0!==I&&I.isMuted?i.a.createElement("div",{className:S.placeholder}):i.a.createElement(N,{track:I.track,isLocal:P,objectFit:z,width:"100%",height:"100%"});var q=[S.participant];return r&&q.push(r),i.a.createElement("div",{ref:w,className:q.join(" "),style:H,onMouseEnter:g,onMouseLeave:j,onClick:O},o&&l&&i.a.createElement(b.a,{ratio:o/l},B),(!o||!l)&&B,f&&i.a.createElement("div",{className:S.participantBar},i.a.createElement("div",null,s),i.a.createElement("div",null,i.a.createElement(v.a,{icon:L?m.d:m.c,height:24,className:L?S.iconRed:S.iconNormal}))))},C=function(e){var t=e.track,n=e.width,a=e.height;return i.a.createElement("div",{className:S.screenShare},i.a.createElement(N,{track:t,isLocal:!1,width:n,height:a}))},M="_2sm4e",w="_2VE66",R="_2kKDi",V="_gA0MQ",I="_1smc2",_=function(e){var t=e.roomState,n=e.participantRenderer,c=e.controlRenderer,r=e.onLeave,o=e.adaptiveVideo,l=t.isConnecting,u=t.error,s=t.participants,m=t.room,v=Object(a.useState)(!1),f=v[0],h=v[1];if(u)return i.a.createElement("div",null,"error ",u.message);if(l)return i.a.createElement("div",null,"connecting");if(!m)return i.a.createElement("div",null,"room closed");if(0===s.length)return i.a.createElement("div",null,"no one is in the room");var b,E,k,g=null!=n?n:L,S=null!=c?c:P;return s.forEach((function(e){e instanceof d.LocalParticipant||e.videoTracks.forEach((function(e){"screen"===e.trackName&&e.track&&(b=e.track)}))})),b?(E=s,k=i.a.createElement(C,{track:b,height:"100%",width:"100%"})):(E=s.slice(1),k=i.a.createElement(g,{key:s[0].identity,participant:s[0],width:"100%",height:"100%",orientation:"landscape",showOverlay:f,quality:p.VideoQuality.HIGH,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)}})),i.a.createElement("div",{className:M},i.a.createElement("div",{className:w},i.a.createElement("div",{className:R},k),i.a.createElement("div",{className:V},E.map((function(e,t){var n=p.VideoQuality.HIGH;return o&&t>4&&(n=p.VideoQuality.LOW),i.a.createElement(g,{key:e.identity,participant:e,width:"100%",aspectWidth:16,aspectHeight:9,showOverlay:f,quality:n,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:o})})))),i.a.createElement("div",{className:I},i.a.createElement(S,{room:m,onLeave:r})))},A="_2zM8F",D="_9PXrI",K="_Tl5ht",x="_jGXiG",U="_3MB5b",W=function(e){var t=e.roomState,n=e.participantRenderer,c=e.controlRenderer,r=e.onLeave,o=e.adaptiveVideo,l=t.isConnecting,u=t.error,s=t.participants,m=t.room,v=Object(a.useState)(!1),f=v[0],h=v[1];if(u)return i.a.createElement("div",null,"error ",u.message);if(l)return i.a.createElement("div",null,"connecting");if(!m)return i.a.createElement("div",null,"room closed");if(0===s.length)return i.a.createElement("div",null,"no one is in the room");var b,E,k,g=null!=n?n:L,S=null!=c?c:P;return s.forEach((function(e){e instanceof d.LocalParticipant||e.videoTracks.forEach((function(e){"screen"===e.trackName&&e.track&&(b=e.track)}))})),b?(E=s,k=i.a.createElement(C,{track:b,height:"100%",width:"100%"})):(E=s.slice(1),k=i.a.createElement(g,{key:s[0].identity,participant:s[0],showOverlay:f,width:"100%",height:"100%",orientation:"portrait",quality:p.VideoQuality.MEDIUM,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:o})),i.a.createElement("div",{className:A},i.a.createElement("div",{className:D},k),i.a.createElement("div",{className:K},E.map((function(e,t){var n=p.VideoQuality.MEDIUM;return o&&t>4&&(n=p.VideoQuality.LOW),i.a.createElement(g,{key:e.identity,participant:e,className:x,aspectWidth:4,aspectHeight:3,showOverlay:f,quality:n,onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},adaptiveVideo:o})}))),i.a.createElement("div",{className:U},i.a.createElement(S,{room:m,enableScreenShare:!1,onLeave:r})))},Q=function(e){var t,n=Object(k.useMediaQuery)({query:"(max-width: 800px)"}),a=e.roomState.room;return t=n?i.a.createElement(W,Object.assign({},e)):i.a.createElement(_,Object.assign({},e)),i.a.createElement("div",{className:S.container},t,e.roomState.audioTracks.map((function(e){return i.a.createElement(g,{key:e.sid,track:e,isLocal:!1})})),!1===(null===a||void 0===a?void 0:a.canPlaybackAudio)&&i.a.createElement("div",{className:S.overlay},i.a.createElement("button",{className:S.unmuteButton,onClick:function(){a.startAudio()}},i.a.createElement(v.a,{className:S.icon,size:"1x",icon:m.h}),"Click to Unmute")))},B=function(e){var t=e.isEnabled,n=e.onClick,c=e.onSourceSelected,r=Object(a.useState)([]),o=r[0],l=r[1],u=Object(a.useState)([]),s=u[0],d=u[1];Object(a.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){var t=e.filter((function(e){return"videoinput"===e.kind&&e.deviceId}));l(t),d(t.map((function(e){return{label:e.label}})))}))}),[t]);return i.a.createElement(j,{label:t?"Disable Video":"Enable Video",icon:t?m.f:m.g,onClick:n,menuItems:s,onMenuItemClick:function(e){var t=o.find((function(t){return t.label===e.label}));t&&c&&c(t)}})};function H(e,t){if(e.sort((function(e,t){var n,a,i,c;if(e.isSpeaking&&t.isSpeaking)return t.audioLevel-e.audioLevel;if(e.isSpeaking!==t.isSpeaking)return e.isSpeaking?-1:1;if(e.lastSpokeAt!==t.lastSpokeAt){var r,o,l,u,s=null!=(r=null===(o=e.lastSpokeAt)||void 0===o?void 0:o.getTime())?r:0;return(null!=(l=null===(u=t.lastSpokeAt)||void 0===u?void 0:u.getTime())?l:0)-s}var d=e.videoTracks.size>0;return d!==t.videoTracks.size>0?d?-1:1:(null!=(n=null===(a=e.joinedAt)||void 0===a?void 0:a.getTime())?n:0)-(null!=(i=null===(c=t.joinedAt)||void 0===c?void 0:c.getTime())?i:0)})),t){var n=e.indexOf(t);n>=0&&(e.splice(n,1),e.length>0?e.splice(1,0,t):e.push(t))}}var z=function(e){var t=e.url,n=e.token,i=e.connectOptions,c=e.sortParticipants,r=e.stageRenderer,o=e.participantRenderer,l=e.controlRenderer,u=e.onConnected,s=e.onLeave,m=e.adaptiveVideo,v=function(e){var t,n=Object(a.useState)(),i=n[0],c=n[1],r=Object(a.useState)(!1),o=r[0],l=r[1],u=Object(a.useState)(),s=u[0],m=u[1],v=Object(a.useState)([]),f=v[0],p=v[1],h=Object(a.useState)([]),b=h[0],E=h[1],k=null!=(t=null===e||void 0===e?void 0:e.sortParticipants)?t:H;return{connect:Object(a.useCallback)((function(e,t,n){try{return l(!0),Promise.resolve(y((function(){return Promise.resolve(Object(d.connect)(e,t,n)).then((function(e){c(e);var t=function(){var t=Array.from(e.participants.values()),n=[e.localParticipant];n.push.apply(n,t),k(n,e.localParticipant),p(n)},n=function(n){if(t(),!n||n.kind===d.Track.Kind.Audio){var a=[];e.participants.forEach((function(e){e.audioTracks.forEach((function(e){e.track&&e.kind===d.Track.Kind.Audio&&a.push(e.track)}))})),E(a)}};return e.once(d.RoomEvent.Disconnected,(function(){setTimeout((function(){return c(void 0)})),e.off(d.RoomEvent.ParticipantConnected,t),e.off(d.RoomEvent.ParticipantDisconnected,t),e.off(d.RoomEvent.ActiveSpeakersChanged,t),e.off(d.RoomEvent.TrackSubscribed,n),e.off(d.RoomEvent.TrackUnsubscribed,n)})),e.on(d.RoomEvent.ParticipantConnected,t),e.on(d.RoomEvent.ParticipantDisconnected,t),e.on(d.RoomEvent.ActiveSpeakersChanged,t),e.on(d.RoomEvent.TrackSubscribed,n),e.on(d.RoomEvent.TrackUnsubscribed,n),l(!1),n(),e}))}),(function(e){l(!1),m(e)})))}catch(a){return Promise.reject(a)}}),[]),isConnecting:o,room:i,error:s,participants:f,audioTracks:b}}({sortParticipants:c});return Object(a.useEffect)((function(){v.connect(t,n,i).then((function(e){if(e)return u&&u(e),function(){e.disconnect()}}))}),[]),(null!=r?r:Q)({roomState:v,participantRenderer:o,controlRenderer:l,onLeave:s,adaptiveVideo:m})},q=n(74),F=n.n(q),G=function(){var e=Object(a.useState)("ws://localhost:7880"),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),m=o[0],v=o[1],f=Object(a.useState)(!0),p=Object(u.a)(f,2),h=p[0],b=p[1],E=Object(a.useState)(!1),k=Object(u.a)(E,2),g=k[0],S=k[1],y=Object(a.useState)(!0),T=Object(u.a)(y,2),P=T[0],L=T[1],C=Object(a.useState)(!0),M=Object(u.a)(C,2),w=M[0],R=M[1],V=Object(a.useRef)(null),I=Object(a.useState)(),_=Object(u.a)(I,2),A=_[0],D=_[1],K=Object(a.useState)(),x=Object(u.a)(K,2),U=x[0],W=x[1],Q=Object(a.useState)(),H=Object(u.a)(Q,2),z=H[0],q=H[1],G=Object(l.f)();Object(a.useEffect)((function(){if(V.current&&A){var e=V.current;return A.attach(e),function(){A.detach(e),A.stop()}}}),[A,V]),Object(a.useEffect)((function(){R(!m||!n)}),[m,n]);var X=function(){if(A)A.stop(),S(!1),D(void 0);else{var e={};z&&(e.deviceId=z.deviceId),Object(d.createLocalVideoTrack)(e).then((function(e){S(!0),D(e)}))}};Object(a.useEffect)((function(){Object(d.createLocalVideoTrack)().then((function(e){S(!0),D(e)}))}),[]);var J;return J=A?i.a.createElement(N,{track:A,isLocal:!0}):i.a.createElement("div",{className:"placeholder"}),i.a.createElement("div",{className:"prejoin"},i.a.createElement("main",null,i.a.createElement("h2",null,"LiveKit Video"),i.a.createElement("hr",null),i.a.createElement("div",{className:"entrySection"},i.a.createElement("div",null,i.a.createElement("div",{className:"label"},"LiveKit URL"),i.a.createElement("div",null,i.a.createElement("input",{type:"text",name:"url",value:n,onChange:function(e){return c(e.target.value)}}))),i.a.createElement("div",null,i.a.createElement("div",{className:"label"},"Token"),i.a.createElement("div",null,i.a.createElement("input",{type:"text",name:"token",value:m,onChange:function(e){return v(e.target.value)}}))),i.a.createElement("div",null,i.a.createElement("input",{type:"checkbox",name:"simulcast",checked:h,onChange:function(e){return b(e.target.checked)}}),i.a.createElement("label",null,"Simulcast"))),i.a.createElement("div",{className:"videoSection"},i.a.createElement(F.a,{ratio:16/9},J)),i.a.createElement("div",{className:"controlSection"},i.a.createElement("div",null,i.a.createElement(O,{isMuted:!P,onClick:function(){L(!P)},onSourceSelected:W}),i.a.createElement(B,{isEnabled:void 0!==A,onClick:X,onSourceSelected:function(e){if(q(e),A){if(A.mediaStreamTrack.getSettings().deviceId===e.deviceId)return;X()}X()}})),i.a.createElement("div",{className:"right"},i.a.createElement(j,{label:"Connect",disabled:w,icon:s.a,onClick:function(){if("https:"!==window.location.protocol||!n.startsWith("ws://")||n.startsWith("ws://localhost")){var e={url:n,token:m,videoEnabled:g?"1":"0",audioEnabled:P?"1":"0",simulcast:h?"1":"0"};U&&(e.audioDeviceId=U.deviceId),z&&(e.videoDeviceId=z.deviceId),G.push({pathname:"/room",search:"?"+new URLSearchParams(e).toString()})}else alert("Unable to connect to insecure websocket from https")}})))),i.a.createElement("footer",null,"This page is built with ",i.a.createElement("a",{href:"https://github.com/livekit/livekit-react"},"LiveKit React"),"\xa0 (",i.a.createElement("a",{href:"https://github.com/livekit/livekit-react/blob/master/example/src/PreJoinPage.tsx"},"source"),")"))},X=n(12),J=n.n(X),Y=n(75),Z=n(76),$=(n(130),function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(l.f)(),o=new URLSearchParams(Object(l.g)().search),m=o.get("url"),v=o.get("token"),f=o.get("recorder");if(!m||!v)return i.a.createElement("div",null,"url and token are required");var p=function(e){c(e.participants.size+1)};return i.a.createElement("div",{className:"roomContainer"},i.a.createElement("div",{className:"topBar"},i.a.createElement("h2",null,"LiveKit Video"),i.a.createElement("div",{className:"participantCount"},i.a.createElement(Z.a,{icon:s.b}),i.a.createElement("span",null,n))),i.a.createElement(z,{url:m,token:v,onConnected:function(e){!function(e,t){ee.apply(this,arguments)}(e,o),e.on(d.RoomEvent.ParticipantConnected,(function(){return p(e)})),e.on(d.RoomEvent.ParticipantDisconnected,(function(){return function(e){p(e),f&&1===parseInt(f,10)&&0===e.participants.size&&console.log("END_RECORDING")}(e)})),p(e)},onLeave:function(){r.push({pathname:"/"})},adaptiveVideo:!0}))});function ee(){return(ee=Object(Y.a)(J.a.mark((function e(t,n){var a,i,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.currentRoom=t,Object(d.createLocalTracks)(),a={},te(n,"audioEnabled")&&(a.audio={},(i=n.get("audioDeviceId"))&&(a.audio.deviceId=i)),te(n,"videoEnabled")&&(a.video={name:"camera"},(c=n.get("videoDeviceId"))&&(a.video.deviceId=c)),e.next=7,Object(d.createLocalTracks)(a);case 7:e.sent.forEach((function(e){var a={};te(n,"simulcast")&&e.kind===d.Track.Kind.Video&&(a.simulcast=!0),t.localParticipant.publishTrack(e,a)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return"1"===e.get(t)||"true"===e.get(t)}var ne=function(){return i.a.createElement("div",{className:"container"},i.a.createElement(o.a,null,i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"/room"},i.a.createElement($,null)),i.a.createElement(l.a,{path:"/"},i.a.createElement(G,null)))))};r.a.render(i.a.createElement(ne,null),document.getElementById("root"))},77:function(e,t,n){e.exports=n(132)},78:function(e,t,n){},83:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.3d42548b.chunk.js.map